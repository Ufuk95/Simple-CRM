<div>
    <mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>
    <h2 mat-dialog-title>Edit user</h2>

    <form #editUserForm="ngForm" (ngSubmit)="saveUser()">
        <div class="d-flex">
            <mat-dialog-content>
                <mat-form-field appearance="outline">
                    <mat-label>First Name</mat-label>
                    <input [disabled]="loading" [(ngModel)]="user.firstName" name="firstName" #firstName="ngModel"
                        matInput placeholder="1st name" type="text" pattern="^[A-Za-zÀ-ÿ\-']+$" required
                        [ngClass]="{'invalid': !firstName.valid && (firstName.touched || editUserForm.submitted), 'valid': firstName.valid && (firstName.touched || editUserForm.submitted)}">
                </mat-form-field>
                <div class="warnMessage">
                    <span *ngIf="!firstName.valid && (firstName.touched || editUserForm.submitted)">Please enter a valid first name</span>
                </div>
            </mat-dialog-content>

            <mat-dialog-content>
                <mat-form-field appearance="outline">
                    <mat-label>Last Name</mat-label>
                    <input [disabled]="loading" [(ngModel)]="user.lastName" name="lastName" #lastName="ngModel"
                        matInput placeholder="2nd name" type="text" pattern="^[A-Za-zÀ-ÿ\s\-]+$" required
                        [ngClass]="{'invalid': !lastName.valid && (lastName.touched || editUserForm.submitted), 'valid': lastName.valid && (lastName.touched || editUserForm.submitted)}">
                </mat-form-field>
                <div class="warnMessage">
                    <span *ngIf="!lastName.valid && (lastName.touched || editUserForm.submitted)">Please enter a valid last name</span>
                </div>
            </mat-dialog-content>
        </div>

        <div>
            <mat-dialog-content>
                <mat-form-field appearance="outline" style="width: 100%">
                    <mat-label>E-mail</mat-label>
                    <input [disabled]="loading" [(ngModel)]="user.email" name="email" #email="ngModel"
                        matInput placeholder="email address"
                        pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" required
                        [ngClass]="{'invalid': !email.valid && (email.touched || editUserForm.submitted), 'valid': email.valid && (email.touched || editUserForm.submitted)}">
                </mat-form-field>
                <div class="warnMessage">
                    <span *ngIf="!email.valid && (email.touched || editUserForm.submitted)">Please enter a valid email</span>
                </div>
            </mat-dialog-content>
        </div>

        <div class="d-flex">
            <mat-dialog-content>
                <mat-form-field appearance="outline" style="width: 100%">
                    <mat-label>Birthdate</mat-label>
                    <input [disabled]="loading" [(ngModel)]="birthDate" name="birthDate" #birthDateModel="ngModel"
                        matInput placeholder="birthdate" [matDatepicker]="picker" required
                        [ngClass]="{'invalid': !birthDateModel.valid && (birthDateModel.touched || editUserForm.submitted), 'valid': birthDateModel.valid && (birthDateModel.touched || editUserForm.submitted)}">
                    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                    <mat-hint>MM/DD/YYYY</mat-hint>
                </mat-form-field>
                <div class="warnMessage">
                    <span *ngIf="!birthDateModel.valid && (birthDateModel.touched || editUserForm.submitted)">Please enter a valid birthdate</span>
                </div>
            </mat-dialog-content>
        </div>

        <mat-dialog-actions>
            <button [disabled]="loading" mat-button (click)="this.dialog.close();">Cancel</button>
            <button [disabled]="loading || !editUserForm.form.valid" mat-button type="submit" value="submit" cdkFocusInitial>Save</button>
        </mat-dialog-actions>
    </form>
</div>
